language: python

python: "3.6"  # or the highest if we update the python

before_install: pip install pytest-cov

install: pip install -e .

script: make test

notifications:
  email:
    recipients:
      - ajax@bynder.com
    on_success: never
    on_failure: always

deploy:
  provider: pypi
  username: "__token__"
  password:
    secure: $PYPI_TOKEN_BYNDER_TEST
  distributions: "bdist_wheel"
  on:
    branch: stage